version: 2

models:
  - name: customers
    description: Customer-level aggregated metrics and segmentation
    columns:
      - name: customer_id
        description: Unique identifier for the customer
        tests:
          - unique
          - not_null
      
      - name: lifetime_value
        description: Total revenue generated by this customer
        tests:
          - not_null
      
      - name: lifetime_orders
        description: Total number of completed orders
        tests:
          - not_null
      
      - name: customer_segment
        description: Customer value segment (High/Medium/Low Value)
        tests:
          - accepted_values:
              values: ['High Value', 'Medium Value', 'Low Value']
  
  - name: orders
    description: Enriched order-level data for analytics
    columns:
      - name: order_id
        description: Unique identifier for the order
        tests:
          - unique
          - not_null
      
      - name: customer_id
        description: Foreign key to customers
        tests:
          - not_null
          - relationships:
              to: ref('customers')
              field: customer_id
      
      - name: order_total
        description: Total order value including freight
        tests:
          - not_null
      
      - name: order_status
        description: Current status of the order
        tests:
          - accepted_values:
              values: ['delivered', 'shipped', 'processing', 'canceled', 'invoiced']
